<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<header>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
          rel="stylesheet" integrity="sha384-
1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <title>
        Lista masini
    </title>
</header>
<body>

<span>
    Salut, <strong sec:authentication="name">Utilizator</strong>!
</span>

<h3 th:text="${str}"/>

<div class="container my-3">
    <form th:action="@{/masini}" method="get" class="row g-3">
        <div class="col-md-3">
            <label class="form-label">Marca:</label>
            <input type="text" name="marca" class="form-control"
                   th:value="${marcaSelectata}" placeholder="Ex: ford">
        </div>
        <div class="col-md-3">
            <label class="form-label">Culoare:</label>
            <input type="text" name="culoare" class="form-control"
                   th:value="${culoareaSelectata}" placeholder="Ex: negru">
        </div>
        <div class="col-md-3">
            <label class="form-label">Combustibil:</label>
            <select name="combustibil" class="form-select">
                <option value="benzina" th:selected="${combustibilSelectat == 'benzina'}">Benzina</option>
                <option value="diesel" th:selected="${combustibilSelectat == 'diesel'}">Diesel</option>
                <option value="electric" th:selected="${combustibilSelectat == 'electric'}">Electric</option>
                <option value="hibrid" th:selected="${combustibilSelectat == 'hibrid'}">Hibrid</option>
            </select>
        </div>
        <div class="col-md-3 align-self-end">
            <button type="submit" class="btn btn-primary w-100 mb-2">Filtreaza</button>
            <a th:href="@{/masini}" class="btn btn-secondary btn-sm">Reseteaza Filtrele</a>
        </div>
    </form>
</div>

<div sec:authorize="hasAuthority('ROLE_EDITOR')">
    <a href="/masini/adauga" class="btn btn-success"> Adauga masina</a>
</div>

<table class="table table-striped table-bordered">
    <tr>
        <th>Numar inmatriculare</th>
        <th>Marca</th>
        <th>Model</th>
        <th>Culoare</th>
        <th>An fabricatie</th>
        <th>Capacitate cilindrica</th>
        <th>Combustibil</th>
        <th>Putere</th>
        <th>Cuplu</th>
        <th>Volum portbagaj</th>
        <th>Pret</th>

        <th sec:authorize="hasAuthority('ROLE_EDITOR')" style="width: 150px;">Actiuni</th>
    </tr>
    <tr th:each="c : ${lista}">
        <td th:text="${c.nrInmatriculare}"></td>
        <td th:text="${c.marca}"></td>
        <td th:text="${c.model}"></td>
        <td th:text="${c.culoarea}"></td>
        <td th:text="${c.anulFabricatiei}"></td>
        <td th:text="${c.capacitateaCilindrica}"></td>
        <td th:text="${c.tipulDeCombustibil}"></td>
        <td th:text="${c.puterea}"></td>
        <td th:text="${c.cuplul}"></td>
        <td th:text="${c.volumulPortbagajului}"></td>
        <td th:text="${c.pret}"></td>

        <td sec:authorize="hasAuthority('ROLE_EDITOR')">
            <div class="d-flex gap-2">
                <a th:href="@{'/masini/editeaza/' + ${c.nrInmatriculare}}"
                   class="btn btn-warning btn-sm">
                    editeaza
                </a>

                <form th:action="@{'/masini/sterge/' + ${c.nrInmatriculare}}" method="post" class="m-0">
                    <button type="submit" class="btn btn-danger btn-sm"
                            onclick="return confirm('Sigur stergi masina?')">
                        sterge
                    </button>
                </form>
            </div>
        </td>
    </tr>
</table>

<form th:action="@{/logout}" method="post" class="m-0">
    <button type="submit" class="btn btn-danger btn-sm">Logout</button>
</form>
</body>
</html>